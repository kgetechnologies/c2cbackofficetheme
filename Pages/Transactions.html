<!DOCTYPE html>

<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="horizontal-menu-template">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Transactions-Page</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet" />

    <!-- Icons -->
    <link rel="stylesheet" href="../assets/vendor/fonts/fontawesome.css" />
    <link rel="stylesheet" href="../assets/vendor/fonts/tabler-icons.css" />
    <link rel="stylesheet" href="../assets/vendor/fonts/flag-icons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="../assets/vendor/css/rtl/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../assets/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="../assets/vendor/libs/node-waves/node-waves.css" />
    <link rel="stylesheet" href="../assets/vendor/libs/typeahead-js/typeahead.css" />
    <link rel="stylesheet" href="../assets/vendor/libs/spinkit/spinkit.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="../assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="../assets/vendor/js/template-customizer.js"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../assets/js/config.js"></script>

    <style>
     

    .popup {
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 400px;
      width: 100%;
      padding: 20px;
      background-color: white;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      display: none;
    }
    input[type="submit"],
    input[type="button"] {
      padding: 10px 20px;
      background-color: purple;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      width: 49%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }

    .popup1 {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .popup-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 60%;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .transaction-details {
      margin-bottom: 20px;
    }

    .pagination {
      margin-top: 20px;
    }

    .pagination a {
      padding: 5px 10px;
      text-decoration: none;
      background-color: #f2f2f2;
      color: #333;
      border: 1px solid #ccc;
      margin-right: 5px;
    }

    .pagination a.active {
      background-color: #007bff;
      color: #fff;
    }

    h2 {
      margin-top: 0;
      text-align: center;
    }

    .form-group {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-weight: bold;
    }

    input[type="text"],
    select {
      width: 100%;
      padding: 5px;
      border-radius: 3px;
      border: 1px solid #ccc;
    }

    

    .close-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
  </head>

  <body>
     <!-- Layout wrapper -->
     <div class="layout-wrapper layout-navbar-full layout-horizontal layout-without-menu">
      <div class="layout-container">
        <!-- Navbar -->

        <nav class="layout-navbar navbar navbar-expand-xl align-items-center bg-navbar-theme" id="layout-navbar">
          <div class="container-xxl">
            <div class="navbar-brand app-brand demo d-none d-xl-flex py-0 me-4">
              <a href="index.html" class="app-brand-link gap-2">
                <span class="app-brand-logo demo">
                  <svg width="32" height="22" viewBox="0 0 32 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0.00172773 0V6.85398C0.00172773 6.85398 -0.133178 9.01207 1.98092 10.8388L13.6912 21.9964L19.7809 21.9181L18.8042 9.88248L16.4951 7.17289L9.23799 0H0.00172773Z"
                      fill="#7367F0" />
                    <path
                      opacity="0.06"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M7.69824 16.4364L12.5199 3.23696L16.5541 7.25596L7.69824 16.4364Z"
                      fill="#161616" />
                    <path
                      opacity="0.06"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M8.07751 15.9175L13.9419 4.63989L16.5849 7.28475L8.07751 15.9175Z"
                      fill="#161616" />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M7.77295 16.3566L23.6563 0H32V6.88383C32 6.88383 31.8262 9.17836 30.6591 10.4057L19.7824 22H13.6938L7.77295 16.3566Z"
                      fill="#7367F0" />
                  </svg>
                </span>
                <span class="app-brand-text demo menu-text fw-bold">DFT</span>
              </a>

              <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-xl-none">
                <i class="ti ti-x ti-sm align-middle"></i>
              </a>
            </div>

            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="ti ti-menu-2 ti-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <ul class="navbar-nav flex-row align-items-center ms-auto">
               

                <!-- Search -->
                <li class="nav-item navbar-search-wrapper me-2 me-xl-0">
                  <a class="nav-link search-toggler" href="javascript:void(0);">
                    <i class="ti ti-search ti-md"></i>
                  </a>
                </li>
                <!-- /Search -->

                <!-- Style Switcher -->
                <li class="nav-item me-2 me-xl-0">
                  <a class="nav-link style-switcher-toggle hide-arrow" href="javascript:void(0);">
                    <i class="ti ti-md"></i>
                  </a>
                </li>
                <!--/ Style Switcher -->

               

               

                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online">
                      <img src="../assets/img/avatars/1.png" alt class="h-auto rounded-circle" />
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="ProfilePage.html">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="../assets/img/avatars/1.png" alt class="h-auto rounded-circle" />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">John Doe</span>
                            <small class="text-muted">Admin</small>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="UserProof.html">
                        <i class="ti ti-user-check me-2 ti-sm"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-account-settings-account.html">
                        <i class="ti ti-settings me-2 ti-sm"></i>
                        <span class="align-middle">Settings</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-account-settings-billing.html">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 ti ti-credit-card me-2 ti-sm"></i>
                          <span class="flex-grow-1 align-middle">Billing</span>
                          <span class="flex-shrink-0 badge badge-center rounded-pill bg-label-danger w-px-20 h-px-20"
                            >2</span
                          >
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-help-center-landing.html">
                        <i class="ti ti-lifebuoy me-2 ti-sm"></i>
                        <span class="align-middle">Help</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-faq.html">
                        <i class="ti ti-help me-2 ti-sm"></i>
                        <span class="align-middle">FAQ</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-pricing.html">
                        <i class="ti ti-currency-dollar me-2 ti-sm"></i>
                        <span class="align-middle">Pricing</span>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="auth-login-cover.html">
                        <i class="ti ti-logout me-2 ti-sm"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>

            <!-- Search Small Screens -->
            <div class="navbar-search-wrapper search-input-wrapper container-xxl d-none">
              <input
                type="text"
                class="form-control search-input border-0"
                placeholder="Search..."
                aria-label="Search..." />
              <i class="ti ti-x ti-sm search-toggler cursor-pointer"></i>
            </div>
          </div>
        </nav>

        <!-- / Navbar -->

       <!-- Layout container -->
       <div class="layout-page">
        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Menu -->
          <aside id="layout-menu" class="layout-menu-horizontal menu-horizontal menu bg-menu-theme flex-grow-0">
            <div class="container-xxl d-flex h-100">
              <ul class="menu-inner">
                <!-- Dashboards -->
                <li class="menu-item ">
                  <a href="Dashboard.html" class="menu-link">
                    <i class="menu-icon tf-icons ti ti-smart-home"></i>
                    <div data-i18n="Dashboards">Dashboard</div>
                  </a>
                </li>

               

                <!-- Apps -->
                <li class="menu-item active">
                  <a href="javascript:void(0)" class="menu-link menu-toggle">
                    <i class="menu-icon tf-icons ti ti-layout-grid-add"></i>
                    <div data-i18n="Shortcuts">Shortcuts</div>
                  </a>
                  <ul class="menu-sub">
                    <li class="menu-item">
                      <a href="app-email.html" class="menu-link">
                        <i class="menu-icon tf-icons ti ti-mail"></i>
                        <div data-i18n="Email">Email</div>
                      </a>
                    </li>
                    <li class="menu-item">
                      <a href="app-chat.html" class="menu-link">
                        <i class="menu-icon tf-icons ti ti-messages"></i>
                        <div data-i18n="Chat">Chat</div>
                      </a>
                    </li>
                    <li class="menu-item">
                      <a href="app-calendar.html" class="menu-link">
                        <i class="menu-icon tf-icons ti ti-calendar"></i>
                        <div data-i18n="Calendar">Calendar</div>
                      </a>
                    </li>
                    
                    <li class="menu-item">
                      <a href="BankAccount.html" class="menu-link">
                        <i class="menu-icon tf-icons ti ti-file-dollar"></i>
                        <div data-i18n="Bank Accounts">Bank Accounts</div>
                      </a>
                     
                    </li>
                    <li class="menu-item">
                      <a href="AgentPage.html" class="menu-link">
                         <i class="menu-icon tf-icons fab fa-adn mb-2"></i>
                        <div data-i18n="Agents">Agents</div>
                      </a>
                    </li>
                    <li class="menu-item">
                      <a href="User-Management.html" class="menu-link">
                        <i class="menu-icon tf-icons ti ti-users"></i>
                        <div data-i18n="Users">Users</div>
                      </a>
                      
                    </li>
                  </ul>
                </li>

                

                <!-- Cards -->
                <li class="menu-item">
                  <a href="CardProof.html" class="menu-link ">
                    <i class="menu-icon tf-icons ti ti-id"></i>
                    <div data-i18n="Cards">Cards</div>
                  </a>
                 
                </li>

                <!-- authentication-->
                <li class="menu-item">
                  <a href="javascript:void(0)" class="menu-link ">
                    <i class="menu-icon tf-icons ti ti-forms"></i>
                    <div data-i18n="Authentication">Authentication</div>
                  </a>
                  
                </li>

              
                <!-- More Detailed Graph -->
                <li class="menu-item">
                  <a href="Graphs.html" class="menu-link ">
                    <i class="menu-icon tf-icons ti ti-chart-bar"></i>
                    <div data-i18n="Reports">Reports</div>
                  </a>
                 
                </li>
              </ul>
            </div>
          </aside>
   
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Shortcuts/</span> Transactions</h4>

             
                <!-- Options-->
                
                  <div class="card mb-2" id="card-block">
                    <h5 class="card-header">Note :<span class="small">You can perform the transaction only after verification</span></h5>
                    <div class="card-body">
                      <div class="row mb-2">
                        <div class="col-md-5"></div>
                        <div class=" col-md-2">
                          <button class="btn btn-primary btn-card-block-multiple">Verify Here..ðŸ‘ˆ</button>
                        </div>
                        <div class="col-md-5"></div>
                        
                    </div>

                    <div class="row mb-2"> 
                      <div class="col-md-5"></div>
                      <div class="col-md-2">
                         <button class="btn btn-primary" id="newTransactionButton">New  Transaction</button>
                      </div>
                      <div class="col-md-5"></div>
                     

                  </div>
                  <div class="row mb-2">
                   
                    <div class="col-md-5"></div>
                    <div  class="col-md-2">
                       <button
                         type="button"
                         class="btn btn-primary btn-card-block-custom"
                         data-bs-toggle="collapse"
                         data-bs-target="#accordionIcon-1"
                         aria-expanded="true"
                         aria-controls="accordionIcon-1">
                        View  Transactions
                       </button>
                       </div>
                       <div class="col-md-5"></div>
                      <div id="accordionIcon" class="accordion mt-3 accordion-without-arrow">
                    
 
                   
 
                     <div class="accordion-item card ">
                      
                       </h2>
                       <div
                         id="accordionIcon-1"
                         class="accordion-collapse collapse show"
                         data-bs-parent="#accordionIcon">
                         <div class="accordion-body">
                           <!-- Transaction History Section -->
                       
                          <h5 >Transaction History<br><span class="small">(you can view details of each transaction in the last column)</span></h5>
                          <div class="col-md-5 col-xl-5 col-4 col-lg-4">
                            <label for="Cards" class="form-label">Select Card</label>
                            <select id="Cards" class="form-select mb-1" name="CardSelect" onchange="generateTransactions(50)">
                              <option value="">--select--</option>
                              <option value="PrimaryCard">Master Primary Card ********9856 </option>
                              <option value="OtherCard">Visa Card ********5896</option>
                            </select>
                          </div>
                          
                          <div class="table-responsive text-nowrap">  
                          <table id="transactionTable" >

                              <thead>
                                <tr>
                                  <th>Date</th>
                                  <th>ID</th>
                                  <th>Customer</th>
                                  <th>Amount</th>
                                  <th>Status</th>
                                  <th>Actions</th>
                                </tr>
                              </thead>
                              <tbody>
                                <!-- Transaction rows will be dynamically added here -->
                              </tbody>
                            </table>

                            <div id="transactionModal" class="popup1">
                              <div class="popup-content">
                                <span class="close" onclick="closeModal()">&times;</span>
                               
                                <div id="transactionDetails" class="transaction-details table-responsive text-nowrap">
                                  <!-- Transaction details will be dynamically added here -->
                                </div>
                              </div>
                            </div>

                            <div id="pagination" class="pagination">
                              <!-- Pagination links will be dynamically added here -->
                            </div>
                            </div>
                          </div>
                          </div>


                         </div>
                       </div>
                   </div>
                  </div>
                </div>
                <!-- Options-->
               
              </div>
              <!--/View details-->    



              <div id="popup" class="popup">
                <span class="close-icon" onclick="closePopup()"><i class="fas fa-times"></i></span>
                <h2>New Transaction</h2>
                <form id="transactionForm">
                  <div class="form-group">
                    <label for="transactionType">Transaction Type:</label>
                    <select id="transactionType" name="transactionType" onchange="setChargesPercentage()">
                      <option value="bankAccount">Bank Account</option>
                      <option value="activeApprovedCard">Active & Approved Card</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="amount">Amount:</label>
                    <input type="text" id="amount" name="amount" oninput="formatAmount(this)">
                  </div>
                  <div class="form-group">
                    <label for="chargesPercentage">Charges (%):</label>
                    <input type="text" id="chargesPercentage" name="chargesPercentage" readonly>
                  </div>
                  <div class="form-group">
                    <label for="chargedAmount">Charged Amount:</label>
                    <input type="text" id="chargedAmount" name="chargedAmount" readonly>
                  </div>
                  <div class="form-group">
                    <label>Payable Amount:</label>
                    <input type="text" id="transferAmount" name="transferAmount" readonly>
                  </div>
                  <div style="display: flex; justify-content: space-between;">
                    <input type="button"  value="Cancel" onclick="closePopup()">
                    <input type="submit"  value="Submit">
                  </div>
                </form>
              </div>
            
              <script>
                const chargesPercentages = {
                  bankAccount: 10,
                  activeApprovedCard: 5
                };
            
                document.getElementById("transactionForm").addEventListener("submit", function(event) {
                  event.preventDefault();
            
                  const amount = document.getElementById("amount").value;
                  const chargesPercentage = parseFloat(document.getElementById("chargesPercentage").value);
                  const chargedAmount = parseFloat(amount) * (chargesPercentage / 100);
                  const transferAmount = parseFloat(amount) + chargedAmount;
            
                  document.getElementById("chargedAmount").value = chargedAmount.toFixed(2);
                  document.getElementById("transferAmount").value = transferAmount.toFixed(2);
                });
            
                function formatAmount(input) {
                  const formattedValue = input.value.replace(/[^0-9.]/g, "");
                  input.value = formattedValue;
                }
            
                function setChargesPercentage() {
                  const transactionType = document.getElementById("transactionType").value;
                  document.getElementById("chargesPercentage").value = chargesPercentages[transactionType];
                }
            
                function closePopup() {
                  document.getElementById("popup").style.display = "none";
                }
            
                document.getElementById("newTransactionButton").addEventListener("click", function() {
                  document.getElementById("popup").style.display = "block";
                  setChargesPercentage();
                });
              </script>

             
               

  

         
  <script>
   var cardInfo = [
  { cardType: "Card 1", overridePercentage: null },
  { cardType: "Card 2", overridePercentage: 5 },
];

var globalChargePercentage = 2; // Global charge percentage for card types

function calculateTransaction() {
  var amount = parseFloat(document.getElementById("amount").value);
  var cardType = document.getElementById("cardType").value;
  var chargePercentage = getChargePercentage(cardType);
  var chargedAmount = amount * (chargePercentage / 100);
  var transferAmount = amount - chargedAmount;

  document.getElementById("chargePercentage").value = chargePercentage + "%";
  document.getElementById("chargedAmount").value = chargedAmount.toFixed(2);
  document.getElementById("transferAmount").value = transferAmount.toFixed(2);
}

function updateChargePercentage() {
  var cardType = document.getElementById("cardType").value;
  var chargePercentage = getChargePercentage(cardType);
  document.getElementById("chargePercentage").value = chargePercentage + "%";

  var amount = parseFloat(document.getElementById("amount").value);
  var chargedAmount = amount * (chargePercentage / 100);
  var transferAmount = amount - chargedAmount;

  document.getElementById("chargedAmount").value = chargedAmount.toFixed(2);
  document.getElementById("transferAmount").value = transferAmount.toFixed(2);
}

function getChargePercentage(cardType) {
  var card = cardInfo.find((card) => card.cardType === cardType);
  if (card && card.overridePercentage != null) {
    return card.overridePercentage;
  } else {
    // Use the global charge percentage for the card type
    if (cardType === "Card 1") return globalChargePercentage;
    else if (cardType === "Card 2") return globalChargePercentage;
  }
  return 0;
}

</script>
  <script>
    var customers = [
      {
        name: "John Doe",
        transactions: generateTransactions(50)
      }
    ];

    var transactionsPerPage = 5; // Number of transactions to show per page
    var currentPage = 1; // Current page number

    function generateTransactions(count) {
      var transactions = [];
      for (var i = 1; i <= count; i++) {
        var transaction = {
          id: "TXN" + i,
          date: getRandomDate(),
          amount: getRandomAmount(),
          status: getRandomStatus(),
          stages: ["Create", "Link Shared", "Customer Paid", "Validated", "Payment Transferred", "Closed"]
        };
        transactions.push(transaction);
      }
      return transactions;
    }

    function getRandomDate() {
      var year = 2023;
      var month = Math.floor(Math.random() * 12) + 1;
      var day = Math.floor(Math.random() * 28) + 1;
      return year + '-' + month.toString().padStart(2, '0') + '-' + day.toString().padStart(2, '0');
    }

    function getRandomAmount() {
      return Math.floor(Math.random() * 1000) + 1;
    }

    function getRandomStatus() {
      var statuses = ["Pending", "Processing", "Completed", "Failed"];
      var randomIndex = Math.floor(Math.random() * statuses.length);
      return statuses[randomIndex];
    }

    function populateTransactionHistory() {
      var transactionTable = document.getElementById("transactionTable");
      var tableBody = transactionTable.getElementsByTagName("tbody")[0];
      tableBody.innerHTML = "";

      var startIndex = (currentPage - 1) * transactionsPerPage;
      var endIndex = startIndex + transactionsPerPage;
      var totalTransactions = 0;

      for (var i = 0; i < customers.length; i++) {
        var customer = customers[i];
        var transactions = customer.transactions;

        for (var j = 0; j < transactions.length; j++) {
          var transaction = transactions[j];
          totalTransactions++;

          if (totalTransactions > startIndex && totalTransactions <= endIndex) {
            var row = document.createElement("tr");

            var dateCell = document.createElement("td");
            dateCell.textContent = transaction.date;
            row.appendChild(dateCell);

            var idCell = document.createElement("td");
            idCell.textContent = transaction.id;
            row.appendChild(idCell);

            var customerCell = document.createElement("td");
            customerCell.textContent = customer.name;
            row.appendChild(customerCell);

            var amountCell = document.createElement("td");
            amountCell.textContent = transaction.amount;
            row.appendChild(amountCell);

            var statusCell = document.createElement("td");
            statusCell.textContent = transaction.status;
            row.appendChild(statusCell);

            var actionsCell = document.createElement("td");
            var viewButton = document.createElement("button");
            viewButton.textContent = "View Details";
            viewButton.setAttribute("onclick", "openModal(" + i + ", " + j + ")");
            actionsCell.appendChild(viewButton);
            row.appendChild(actionsCell);

            tableBody.appendChild(row);
          }
        }
      }

      updatePagination(totalTransactions);
    }

    function updatePagination(totalTransactions) {
      var pagination = document.getElementById("pagination");
      pagination.innerHTML = "";

      var totalPages = Math.ceil(totalTransactions / transactionsPerPage);

      if (totalPages > 1) {
        var prevPage = currentPage - 1;
        if (prevPage < 1) prevPage = 1;
        var prevLink = createPaginationLink(prevPage, "Prev");
        pagination.appendChild(prevLink);

        for (var i = 1; i <= totalPages; i++) {
          var pageLink = createPaginationLink(i, i.toString());
          if (i === currentPage) {
            pageLink.classList.add("active");
          }
          pagination.appendChild(pageLink);
        }

        var nextPage = currentPage + 1;
        if (nextPage > totalPages) nextPage = totalPages;
        var nextLink = createPaginationLink(nextPage, "Next");
        pagination.appendChild(nextLink);
      }
    }

    function createPaginationLink(page, label) {
      var link = document.createElement("a");
      link.textContent = label;
      link.setAttribute("href", "#");
      link.setAttribute("onclick", "changePage(" + page + ")");
      return link;
    }

    function changePage(page) {
      currentPage = page;
      populateTransactionHistory();
    }

    function openModal(customerIndex, transactionIndex) {
      var modal = document.getElementById('transactionModal');
      var transactionDetails = document.getElementById('transactionDetails');
      transactionDetails.innerHTML = "";

      var customer = customers[customerIndex];
      var transaction = customer.transactions[transactionIndex];

      var heading = document.createElement("h4");
      heading.textContent = "Transaction Details";
      transactionDetails.appendChild(heading);

      var customerInfo = document.createElement("p");
      customerInfo.textContent = "Customer: " + customer.name;
      transactionDetails.appendChild(customerInfo);

      var transactionInfo = document.createElement("p");
      transactionInfo.textContent = "Transaction ID: " + transaction.id + ", Amount: " + transaction.amount + ", Status: " + transaction.status;
      transactionDetails.appendChild(transactionInfo);

      var stagesHeading = document.createElement("h5");
      stagesHeading.textContent = "Transaction Stages";
      transactionDetails.appendChild(stagesHeading);

      var stagesTable = document.createElement("table");
      stagesTable.classList.add("transaction-details");

      var stagesTableHeader = document.createElement("thead");
      var stagesTableHeaderRow = document.createElement("tr");
      var stagesTableHeaders = ["Stage", "Date", "Time", "Status"];

      for (var i = 0; i < stagesTableHeaders.length; i++) {
        var headerCell = document.createElement("th");
        headerCell.textContent = stagesTableHeaders[i];
        stagesTableHeaderRow.appendChild(headerCell);
      }

      stagesTableHeader.appendChild(stagesTableHeaderRow);
      stagesTable.appendChild(stagesTableHeader);

      var stagesTableBody = document.createElement("tbody");

      for (var i = 0; i < transaction.stages.length; i++) {
        var stage = transaction.stages[i];
        var row = document.createElement("tr");

        var stageCell = document.createElement("td");
        stageCell.textContent = stage;
        row.appendChild(stageCell);

        var dateCell = document.createElement("td");
        dateCell.textContent = transaction.date;
        row.appendChild(dateCell);

        var timeCell = document.createElement("td");
        var time = new Date().toLocaleTimeString();
        timeCell.textContent = time;
        row.appendChild(timeCell);

        var statusCell = document.createElement("td");
        statusCell.textContent = transaction.status;
        row.appendChild(statusCell);

        stagesTableBody.appendChild(row);
      }

      stagesTable.appendChild(stagesTableBody);
      transactionDetails.appendChild(stagesTable);

      modal.style.display = "block";
    }

    function closeModal() {
      var modal = document.getElementById('transactionModal');
      modal.style.display = "none";
    }

    function calculateTransaction() {
      var amount = parseFloat(document.getElementById("amount").value);
      var cardType = document.getElementById("cardType").value;
      var chargePercentage = getChargePercentage(cardType);
      var chargedAmount = amount + amount * chargePercentage;
      var transferAmount = amount * (1 - chargePercentage);

      document.getElementById("chargePercentage").value = chargePercentage;
      document.getElementById("chargedAmount").value = chargedAmount.toFixed(2);
      document.getElementById("transferAmount").value = transferAmount.toFixed(2);
    }

    function updateChargePercentage() {
      var cardType = document.getElementById("cardType").value;
      var chargePercentage = getChargePercentage(cardType);
      document.getElementById("chargePercentage").value = chargePercentage;

      var amount = parseFloat(document.getElementById("amount").value);
      var chargedAmount = amount + amount * chargePercentage;
      var transferAmount = amount * (1 - chargePercentage);

      document.getElementById("chargedAmount").value = chargedAmount.toFixed(2);
      document.getElementById("transferAmount").value = transferAmount.toFixed(2);
    }

    function getChargePercentage(cardType) {
      // You can define your own charge percentages for different card types here
      if (cardType === "Card 1") return 0.02;
      else if (cardType === "Card 2") return 0.05;
      else return 0;
    }

    // Initial population of transaction history
    populateTransactionHistory();
  </script>


           <!--/Content-->


           <!-- Footer -->
           <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl">
              <div
                class="footer-container d-flex align-items-center justify-content-between py-2 flex-md-row flex-column">
                <div>
                  Â©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , <a href="https://www.kgetechnologies.com/software-internship-in-india" target="_blank" class="fw-semibold"> powered by KGE TECHNOLOGIES</a>
                </div>
            </footer>
          <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!--/ Content wrapper -->
        </div>

        <!--/ Layout container -->
      </div>
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>

    <!-- Drag Target Area To SlideIn Menu On Small Screens -->
    <div class="drag-target"></div>

    <!--/ Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="../assets/vendor/libs/node-waves/node-waves.js"></script>

    <script src="../assets/vendor/libs/hammer/hammer.js"></script>
    <script src="../assets/vendor/libs/i18n/i18n.js"></script>
    <script src="../assets/vendor/libs/typeahead-js/typeahead.js"></script>

    <script src="../assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

     <!-- Vendors JS -->
     <script src="../assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
     <!-- Flat Picker -->
     <script src="../assets/vendor/libs/moment/moment.js"></script>
     <script src="../assets/vendor/libs/flatpickr/flatpickr.js"></script>
     <!-- Form Validation -->
     <script src="../assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js"></script>
     <script src="../assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js"></script>
     <script src="../assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js"></script>
 
     <!-- Main JS -->
     <script src="../assets/js/main.js"></script>
 
     <!-- Page JS -->
     <script src="../assets/vendor/libs/block-ui/block-ui.js"></script>
     <script src="../assets/js/extended-ui-blockui.js"></script>
     <script src="../assets/js/tables-datatables-basic.js"></script>
     <script src="../assets/js/app-access-roles.js"></script>
     <script src="../assets/js/modal-add-role.js"></script>
  </body>
</html>
